<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>


    <script src="/js2/jquery.min.js"></script>
    <script src="/js2/layui/layui.js"></script>
    <link rel="stylesheet" href="/js2/layui/css/layui.css">
    <style type="text/css">
        /* width:90px; height:30px;*/
        .select_style { overflow:hidden;
            border:1px solid #ccc;
            -moz-border-radius: 5px; /* Gecko browsers */
            -webkit-border-radius: 5px; /* Webkit browsers */
            border-radius:5px;
        }
        .select_style select { padding:5px; background:transparent;  font-size: 16px; border:none;
            -webkit-appearance: none; /*for Webkit browsers*/
        }
    </style>

</head>
<body>

<div class=" layui-row">
    <form class="layui-form">
        <div class="layui-inline" style="width: 400px">
            <label class="layui-form-label">支付状态</label>
            <div class="layui-input-inline" style="width: 100px; margin-bottom: 0px; margin-top: 3px" >
                <div style="float: left" class=" layui-row">
                    <select name="draw" lay-filter="draw" id="draw" style="width:10px" >
                        <option value="1">订单号</option>
                        <option value="2">发货姓名</option>
                        <option value="3">发货人手机号</option>
                    </select>
                </div>
                <div style="float: left" class="layui-inline">
                    <input class="layui-input" name="fleid" id="fleid" autocomplete="off">
                </div>
            </div>

        </div>

    </form>

    <form class="layui-form">
        <div class="layui-form-item" style="margin-bottom: 0px; margin-top: 3px">
            <select name="aaa" lay-filter="aaa" id="aaa">
                <option value="">请选择类型</option>
                <option value="1">按发货地</option>
                <option value="2">按收货地</option>

            </select>
        </div>
    </form>
    <div>
        <div style="float: left;">省:</div>
        <div class="select_style" style="float: left;">
            <!--class="easyui-combobox"-->
            <select name="id"  id="slid" onchange="shiid1()" style="width: 90px;"> </select>
        </div>
        <div style="float: left;">市：</div>
        <div class="select_style" style="float: left">
            <select name="id"  id="shiid" onchange="xianid1()" style="width: 90px;"></select>
        </div>
        <div style="float: left;">县: </div>
        <div class="select_style" style="float: left;">
            <select name="id"  id="xianid" style="width: 90px;"></select>
        </div>
        <div style="clear:both"></div>
    </div>

    <form class="layui-form">


        <div class="layui-form-item" style="margin-bottom: 0px; margin-top: 3px">
            <input type="text" class="layui-input" id="startPlaceDate" placeholder="yyyy-MM-dd" style="width: 100px">到
        </div>
        <div class="layui-form-item" style="margin-bottom: 0px; margin-top: 3px">
            <input type="text" class="layui-input" id="endPlaceDate" placeholder="yyyy-MM-dd" style="width: 100px">
        </div>



    </form>


    <button class="layui-btn" data-type="reload" id="anniu">搜索</button>
</div>

<table class="layui-hide" id="test" style="height: 600px"></table>


<script>
    function xianid1() {
        var a=document.getElementById("shiid");
        a=a.value
        $.ajax({
            url:"/getxian",
            type: "post",
            data:{typeid:a},
            success : function (data) {
                var hi="";

                for (var i = 0; i <data.length; i++) {

                    hi+="<option value='"+data[i].id+"'>"+data[i].name+"</option>";
                }
                $("#xianid").html(hi);

            }
        })

    }

    function shiid1() {
        var a=document.getElementById("slid");

        a=a.value
        $.ajax({
            url:"/getshi",
            type: "post",
            data:{typeid:a},
            success : function (data) {
                var hi="";
                for (var i = 0; i <data.length; i++) {
                    hi+="<option value='"+data[i].id+"'>"+data[i].name+"</option>";
                }
                $("#shiid").html(hi);
                $("#xianid").html("");
            }
        })

    }

    $(function () {
        $.ajax({
            url:"/getsheng",
            type: "post",
            success : function (data) {
                var hi="";
                for (var i = 0; i <data.length; i++) {
                    hi+="<option value='"+data[i].id+"'>"+data[i].name+"</option>";
                }
                $("#slid").html(hi);
                $("#sslid").html(hi);


            }
        })
    })
</script>





</body>
<script th:inline="none">
    layui.use('laydate', function(){
        var laydate = layui.laydate;

        //常规用法
        laydate.render({
            elem: '#startPlaceDate'
        });
        laydate.render({
            elem: '#endPlaceDate'
        });
    })


    var form='';//定义全局变量
    layui.use(['form','laydate'],function(){
        form  = layui.form,
            laydate = layui.layuidate;
        form.render();//更新渲染表单
    });
    $(function () {

        init();
   })

function init() {
    layui.use('table', function() {
        var table = layui.table;
        table.render({
            elem: '#test',
            dataType: 'json'
            , url: '/findOrder'
            , cellMinWidth: 80 //全局定义常规单元格的最小宽度，layui 2.2.1 新增
            , cols: [[
                {field: 'id', width: 80, title: 'ID', sort: true}
                , {field: 'orderNo', width: 80, title: '订单号'}
                , {field: 'placeDate', width: 150, title: '下单时间', sort: true}
                , {field: 'shipping', width: 80, title: '发货人'}
                , {field: 'sendPhone', width: 100, title: '电话'} //minWidth：局部定义当前单元格的最小宽度，layui 2.2.1 新增
                , {field: 'name', width: 80, title: '支付状态'}
                , {field: 'estimateMoney', width: 80, title: '预估运费', sort: true}
                , {field: 'zhong', width: 80, title: '总重量'}
                , {field: 'volume', width: 137, title: '总体积'}
                ,{field:'county', width:137, title: '从'}
                ,{field:'county1', width:137, title: '到'}

                ,{field:'right', title: '操作', width:150,toolbar:"#barDemo"}
            ]],
            id: 'testReload',
            skin: 'row', //表格风格
            even: true, //隔行背景
            page: true, //是否显示分页
            limits: [2, 5, 10], //显示
            limit: 2, //每页默认显示的数量
            request: {
                page: 'pageNo', //页码的参数名称，默认：page
                limit: 'pageSize' //每页数据量的参数名，默认：limit
            }

        });

        var $ = layui.$, active = {
            reload: function () {
                //执行重载
                table.reload('testReload', {
                    page: {
                        curr: 1 //重新从第 1 页开始
                    }
                    , where: {
                        draw:$("#draw").val(),
                        fleid:$("#fleid").val(),
                        startPlaceDate:$("#startPlaceDate").val(),
                        endPlaceDate:$("#endPlaceDate").val(),
                        aaa:$("#aaa").val(),
                       slid:$("#slid").val(),
                        shiid:$("#shiid").val(),
                        xianid:$("#xianid").val()
                    }
                });
            }

        };
        $('#anniu').on('click', function(){
            var type = $(this).data('type');
            active[type] ? active[type].call(this) : '';
        });
    });
}

</script>

</html>